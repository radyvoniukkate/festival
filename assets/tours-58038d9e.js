import"./index-2dc8a55c.js";document.addEventListener("DOMContentLoaded",function(){let l=localStorage.getItem("isAuthenticated")==="true",o=[];const d=document.getElementById("logoutBtn"),g=document.getElementById("loginLink"),i=()=>{document.querySelectorAll(".editBtn, .deleteBtn, #addBtn").forEach(e=>{e.style.display=l?"inline-block":"none"})};g&&d&&(l&&(g.style.display="none",d.style.display="block"),d.addEventListener("click",function(){localStorage.removeItem("isAuthenticated"),l=!1,i(),window.location.href="./index.html"}));const c=document.getElementById("myModal"),I=document.getElementById("addBtn"),v=document.getElementsByClassName("close")[0],n=document.getElementById("createForm"),r=document.querySelector("#participantsTable tbody"),S=document.getElementById("sortBtnId"),E=document.getElementById("sortBtn"),f=document.getElementById("sortBtnDate"),k=document.getElementById("tour1"),b=document.getElementById("tour2"),L=document.getElementById("tour3");let m=!1;I.onclick=function(){console.log("Open modal for adding participant"),m=!1,n.reset(),document.getElementById("participantId").value="",c.style.display="block"},v.onclick=function(){console.log("Close modal"),c.style.display="none"},window.onclick=function(e){e.target==c&&(console.log("Close modal on outside click"),c.style.display="none")};const u=()=>{const e=JSON.parse(localStorage.getItem("participants"))||[];o=e,s(e)},h=e=>{console.log("Adding row for participant:",e);const t=document.createElement("tr");t.setAttribute("data-id",e.id),t.innerHTML=`
            <td>${e.id}</td>
            <td>${e.name}</td>
            <td>${e.email}</td>
            <td>${e.task}</td>
            <td>${e.averageScore}</td>
            <td>${e.datetime}</td>
            <td class="action-buttons">
                <button class="editBtn" style="display: ${l?"inline-block":"none"}">Редагувати</button>
                <button class="deleteBtn" style="display: ${l?"inline-block":"none"}">Видалити</button>
            </td>
        `,r.appendChild(t),t.querySelector(".editBtn").addEventListener("click",function(){l&&(console.log("Edit participant:",e),m=!0,D(e))}),t.querySelector(".deleteBtn").addEventListener("click",function(){l&&(console.log("Delete participant:",e.id),w(e.id))})},O=()=>{const e=JSON.parse(localStorage.getItem("participants"))||[];return e.length?e[e.length-1].id+1:1},N=e=>{console.log("Save participant:",e);let t=JSON.parse(localStorage.getItem("participants"))||[];m?t=t.map(a=>a.id===e.id?e:a):(e.id=O(),t.push(e)),localStorage.setItem("participants",JSON.stringify(t))},w=e=>{console.log("Delete participant with id:",e);let t=JSON.parse(localStorage.getItem("participants"))||[];t=t.filter(a=>a.id!==e),localStorage.setItem("participants",JSON.stringify(t)),document.querySelector(`tr[data-id="${e}"]`).remove()},D=e=>{console.log("Open edit modal for participant:",e),document.getElementById("participantId").value=e.id,document.getElementById("name").value=e.name,document.getElementById("email").value=e.email,document.getElementById("task").value=e.task;const t=e.scores||[0,0,0,0];document.getElementById("score1").value=t[0],document.getElementById("score2").value=t[1],document.getElementById("score3").value=t[2],document.getElementById("score4").value=t[3],document.getElementById("datetime").value=e.datetime,c.style.display="block"};n.onsubmit=function(e){e.preventDefault(),console.log("Form submitted");const t=parseInt(n.participantId.value,10)||null,a=parseFloat(n.score1.value),y=parseFloat(n.score2.value),p=parseFloat(n.score3.value),B=parseFloat(n.score4.value),M=((a+y+p+B)/4).toFixed(2),P={id:t,name:n.name.value,email:n.email.value,task:n.task.value,averageScore:M,datetime:n.datetime.value,scores:[a,y,p,B]};N(P),c.style.display="none",n.reset(),r.innerHTML="",u()};const J=()=>{console.log("Sort by ID"),o.sort((e,t)=>e.id-t.id),s(o)},$=()=>{console.log("Sort by score"),o.sort((e,t)=>t.averageScore-e.averageScore),s(o)},F=()=>{console.log("Sort by date"),o.sort((e,t)=>new Date(e.datetime)-new Date(t.datetime)),s(o)},s=e=>{console.log("Reload table with participants:",e),r.innerHTML="",e.forEach(t=>h(t)),i()};S.addEventListener("click",J),E.addEventListener("click",$),f.addEventListener("click",F),k.addEventListener("click",()=>{u()}),b.addEventListener("click",()=>{o=(JSON.parse(localStorage.getItem("participants"))||[]).filter(t=>t.averageScore>5),localStorage.setItem("tour2Participants",JSON.stringify(o)),s(o)}),L.addEventListener("click",()=>{o=(JSON.parse(localStorage.getItem("tour2Participants"))||[]).filter(t=>t.averageScore>7),localStorage.setItem("tour3Participants",JSON.stringify(o)),s(o)}),u(),i()});
//# sourceMappingURL=tours-58038d9e.js.map
